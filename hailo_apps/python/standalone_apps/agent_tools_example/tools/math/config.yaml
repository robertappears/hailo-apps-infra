# tools/math/config.yaml
version: "1.0"
tool_name: "math"  # Must match tool.py name

# ═══════════════════════════════════════════════════════════════
# PERSONA - Defines the assistant's role and behavior
# ═══════════════════════════════════════════════════════════════
persona:
  role: "Mathematical Calculator Assistant"
  style: "Concise, accurate, tool-focused"
  constraints:
    - "NEVER calculate math directly - ALWAYS use the math tool"
    - "ALWAYS call the tool before responding with a number"
    - "For greetings and non-math queries, respond directly without tools"

# ═══════════════════════════════════════════════════════════════
# CAPABILITIES - What this agent can do
# ═══════════════════════════════════════════════════════════════
capabilities:
  - "Evaluate mathematical expressions"
  - "Support operators: +, -, *, /, **, //, %"
  - "Handle parentheses and operator precedence"
  - "Process negative numbers"

# ═══════════════════════════════════════════════════════════════
# OUTPUT FORMAT - Response formatting rules
# ═══════════════════════════════════════════════════════════════
output_format:
  tool_call: "XML-wrapped JSON: <tool_call>{...}</tool_call>"
  direct_response: "Brief, factual answers"
  after_tool: "State the result concisely"

# ═══════════════════════════════════════════════════════════════
# TOOL INSTRUCTIONS - Detailed LLM instructions (replaces Python description)
# ═══════════════════════════════════════════════════════════════
tool_instructions: |
  CRITICAL RULE: You MUST use this tool for ALL arithmetic operations.
  The function name is 'math' (use this exact name in tool calls).

  Pass any mathematical expression as a string in the 'expression' parameter.

  Examples of valid expressions:
  - Simple: '5 + 3', '10 / 2', '7 * 8'
  - Complex: '2 - 3 * (2 + 3) / 2'
  - With negatives: '-5 + 3 * -2'
  - Powers: '2 ** 10'

# ═══════════════════════════════════════════════════════════════
# FEW-SHOT EXAMPLES - Added to context for priming
# ═══════════════════════════════════════════════════════════════
few_shot_examples:
  - user: "What is 5 plus 3?"
    tool_call:
      name: "math"
      arguments:
        expression: "5 + 3"
    tool_response: '{"ok": true, "result": "5 + 3 = 8"}'
    final_response: "8"

  - user: "Calculate 2 times 3 plus 4"
    tool_call:
      name: "math"
      arguments:
        expression: "2 * 3 + 4"
    tool_response: '{"ok": true, "result": "2 * 3 + 4 = 10"}'
    final_response: "10"

  - user: "Hello, how are you?"
    final_response: "Hello! I'm here to help with calculations. What would you like me to compute?"

# ═══════════════════════════════════════════════════════════════
# TEST CASES - For benchmarking (not added to context)
# ═══════════════════════════════════════════════════════════════
test_cases:
  - id: "math_001"
    input: "what is 10 divided by 2"
    expected:
      tool_called: true
      tool_name: "math"
      result_contains: "5"
    tags: ["basic", "division"]
    difficulty: "easy"

  - id: "math_002"
    input: "calculate (10 + 5) * 2 - 8 / 4"
    expected:
      tool_called: true
      tool_name: "math"
      result_contains: "28"
    tags: ["complex", "precedence"]
    difficulty: "medium"

  - id: "math_003"
    input: "hello, how are you?"
    expected:
      tool_called: false
    tags: ["greeting", "no-tool"]
    difficulty: "easy"

  - id: "math_004"
    input: "what's 2 to the power of 10"
    expected:
      tool_called: true
      tool_name: "math"
      result_contains: "1024"
    tags: ["power", "exponent"]
    difficulty: "easy"

  - id: "math_005"
    input: "calculate -5 + 3 * -2"
    expected:
      tool_called: true
      tool_name: "math"
      result_contains: "-11"
    tags: ["negative", "complex"]
    difficulty: "medium"

# ═══════════════════════════════════════════════════════════════
# METADATA
# ═══════════════════════════════════════════════════════════════
metadata:
  author: "hailo-team"
  created: "2025-12-11"
  description: "Math tool configuration with optimized prompts"

